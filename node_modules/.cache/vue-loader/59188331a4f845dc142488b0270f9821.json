{"remainingRequest":"/Users/shankar/.nvm/versions/node/v12.16.1/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shankar/Documents/Projects/Javascript/cockatoo-player/src/CockatooPlayer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shankar/Documents/Projects/Javascript/cockatoo-player/src/CockatooPlayer.vue","mtime":1584800571685},{"path":"/Users/shankar/.nvm/versions/node/v12.16.1/lib/node_modules/@vue/cli-service-global/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shankar/.nvm/versions/node/v12.16.1/lib/node_modules/@vue/cli-service-global/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shankar/.nvm/versions/node/v12.16.1/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IHBhcnNlIH0gZnJvbSAnc3VidGl0bGUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNvY2thdG9vUGxheWVyIiwKICBkYXRhOiAoKSA9PiB7CiAgICByZXR1cm4gewogICAgICB0aW1lOiAwLAogICAgICBlbmQ6IDAsCiAgICAgIHN1YnRpdGxlVnR0OiAnaHR0cHM6Ly9naXN0LmdpdGh1YnVzZXJjb250ZW50LmNvbS9wc2dnYW5lc2gvMTZhYjlkNDk3OGMzOTQ1Y2M5NmY1OTYyZTQyMjAwNDEvcmF3LzE5YjQ2MzM4NjQ3ZGE2Mzg2MmJmODM1Y2UwOGI3OThmYTJlZmU3YWIvdHJhbnNjcmlwdC52dHQnLAogICAgICBzdWJ0aXRsZUxpbmVzOiBbXQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuc2V0dXAoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzdWJ0aXRsZSgpIHsKICAgICAgbGV0IGxpbmUgPSB0aGlzLnN1YnRpdGxlTGluZXMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIGxldCBhYnNvbHV0ZVRpbWUgPSBNYXRoLmFicyh0aGlzLnRpbWUgKjEwMDApOwogICAgICAgIGlmKChhYnNvbHV0ZVRpbWUgPj0gZWwuc3RhcnQpICYmIChhYnNvbHV0ZVRpbWUgPD0gZWwuZW5kKSkgewogICAgICAgICAgcmV0dXJuIGVsOwogICAgICAgIH0KICAgICAgfS5iaW5kKHRoaXMpKTsKICAgICAgcmV0dXJuIChsaW5lLmxlbmd0aCA+IDApID8gbGluZS5wb3AoKS50ZXh0IDogJyc7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBzZXR1cCgpIHsKICAgICAgbGV0IHZ0dFJlc3BvbnNlID0gbnVsbDsKICAgICAgYXdhaXQgYXhpb3MuZ2V0KHRoaXMuc3VidGl0bGVWdHQpCiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGhhbmRsZSBzdWNjZXNzCiAgICAgICAgdnR0UmVzcG9uc2UgPSBwYXJzZShyZXNwb25zZS5kYXRhKTsKICAgICAgfSkKICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIC8vIGhhbmRsZSBlcnJvcgogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSkKICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIC8vCiAgICAgIH0pOwogICAgICB0aGlzLnN1YnRpdGxlTGluZXMgPSB2dHRSZXNwb25zZTsKICAgIH0sCiAgICBzZWVrKGxpbmUpIHsKICAgICAgdGhpcy4kcmVmcy5hdWRpby5jdXJyZW50VGltZSA9IE1hdGguYWJzKGxpbmUuc3RhcnQgLyAxMDAwKTsKICAgICAgdGhpcy5lbmQgPSBsaW5lLmVuZDsKICAgICAgdGhpcy4kcmVmcy5hdWRpby5wbGF5KCk7CiAgICB9LAogICAgdXBkYXRlVGltZVNwcml0ZXMoZXZlbnQpIHsKICAgICAgdGhpcy50aW1lID0gZXZlbnQudGFyZ2V0LmN1cnJlbnRUaW1lOwogICAgICBpZih0aGlzLmVuZCAhPT0gMCkgewogICAgICAgIGlmKE1hdGguYWJzKHRoaXMudGltZSAqMTAwMCkgPj0gKHRoaXMuZW5kKSArIDEwMCkgewogICAgICAgICAgdGhpcy4kcmVmcy5hdWRpby5wYXVzZSgpOwogICAgICAgICAgdGhpcy5lbmQgPSAwOwogICAgICAgICAgdGhpcy4kcmVmcy5hdWRpby5jdXJyZW50VGltZSA9IDA7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["CockatooPlayer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CockatooPlayer.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"player\">\n    <audio ref=\"audio\" id=\"audio\" @timeupdate=\"updateTimeSprites\" controls controlsList=\"nodownload\">\n      <source src=\"./purusha-sukta.mp3\" type=\"audio/mpeg\" preload=\"auto\" />\n      Your browser does not support the audio element.\n    </audio>\n    <ul class=\"pad\">\n      <li class=\"line\" v-bind:class=\"{ active: (subtitle === line.text) }\" @click=\"seek(line)\" v-for=\"(line, index) in subtitleLines\" :key=\"index\">\n        {{ line.text }}\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { parse } from 'subtitle'\n\nexport default {\n  name: \"CockatooPlayer\",\n  data: () => {\n    return {\n      time: 0,\n      end: 0,\n      subtitleVtt: 'https://gist.githubusercontent.com/psgganesh/16ab9d4978c3945cc96f5962e4220041/raw/19b46338647da63862bf835ce08b798fa2efe7ab/transcript.vtt',\n      subtitleLines: []\n    }\n  },\n  mounted() {\n    this.setup();\n  },\n  computed: {\n    subtitle() {\n      let line = this.subtitleLines.filter(function (el) {\n        let absoluteTime = Math.abs(this.time *1000);\n        if((absoluteTime >= el.start) && (absoluteTime <= el.end)) {\n          return el;\n        }\n      }.bind(this));\n      return (line.length > 0) ? line.pop().text : '';\n    }\n  },\n  methods: {\n    async setup() {\n      let vttResponse = null;\n      await axios.get(this.subtitleVtt)\n      .then(function (response) {\n        // handle success\n        vttResponse = parse(response.data);\n      })\n      .catch(function (error) {\n        // handle error\n        console.log(error);\n      })\n      .then(function () {\n        //\n      });\n      this.subtitleLines = vttResponse;\n    },\n    seek(line) {\n      this.$refs.audio.currentTime = Math.abs(line.start / 1000);\n      this.end = line.end;\n      this.$refs.audio.play();\n    },\n    updateTimeSprites(event) {\n      this.time = event.target.currentTime;\n      if(this.end !== 0) {\n        if(Math.abs(this.time *1000) >= (this.end) + 100) {\n          this.$refs.audio.pause();\n          this.end = 0;\n          this.$refs.audio.currentTime = 0;\n        }\n      }\n    }\n  }\n};\n</script>\n\n\n<style>\n#player {\n  width: 100%;\n}\naudio {\n  width: 100%;\n  border-radius: 0px;\n  background: #f1f3f4;\n  user-select: none;\n  outline: none;\n}\n.pad {\n  list-style-type: none;\n  text-align: center;\n  font-size: x-large;\n  padding: 0px;\n}\n.line {\n  color: #CCCCCC;\n  user-select: none;\n  font-size: -webkit-xxx-large;\n}\n.line:hover {\n  cursor: pointer;\n  background: #F1F3F459;\n}\n.line.active {\n  color: #444444;\n}\n</style>"]}]}